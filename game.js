function t(){const t=document.getElementById("myCanvas");class e{constructor(t,e){this.x=t,this.y=e}t(t){return new e(this.x+t.x,this.y+t.y)}i(t){return new e(this.x-t.x,this.y-t.y)}l(t){return new e(this.x/t,this.y/t)}o(t){return new e(this.x*t,this.y*t)}u(){return Math.sqrt(this.x*this.x+this.y*this.y)}h(){let t=this.u();return t<1e-8?new e(0,0):new e(this.x/t,this.y/t)}M(t){let n=Math.atan2(this.y,this.x);return n+=t,new e(Math.cos(n),Math.sin(n))}}let n=new e(0,0),i=[];let o,r,l,h,u,f,a,d=Date.now(),s=40,c=[];function y(t,e,n){for(let o=0;o<i.length;++o){if(o===e)continue;let r=i[o];if(!(r.m>0)){if(o>0&&t.i(r.v.t(r.dir.o(.5))).u()<n)return!0;if(t.i(r.v).u()<n)return!0;for(let e=0;e<r.body.length;++e)if(t.i(r.body[e]).u()<n)return!0}}return t.x>s-1||t.x<1||t.y>s-1||t.y<1}function m(t,e,n){for(let o=0;o<i.length;++o){if(o===e)continue;let r=i[o];if(!(r.m>0)){if(t.i(r.v).u()<n&&o<e)return!0;for(let e=0;e<r.body.length;++e)if(t.i(r.body[e]).u()<n)return!0}}return!1}function v(t){if(0===i.length)return new e(s/2,s/2);let n=i[0].v.x,o=i[0].v.y;for(let i=0;i<1e3;++i){let i=3,r=Math.random()*(s-2*i)+i,l=Math.random()*(s-2*i)+i,h=r-n,u=l-o;if(h*h+u*u>81&&!m(new e(r,l),-1,0===t?5:3))return new e(r,l)}return new e(0,0)}function M(t){t.body=[],t.j=[],t.C=0,t.m=1}function w(t,e,n,i,o){t.fillRect(f.x+(e-a.x-i)*u,f.y+(n-a.y-o)*u,i*u*2,o*u*2)}function x(t){n=new e(t.clientX,t.clientY)}function g(t,e,n,i,o){t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!1),t.lineWidth=.2*i,t.fillStyle=o,t.stroke(),t.fill()}function b(t,e,n,i,o){t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!1),t.fillStyle=o,t.fill()}function p(){let t=Math.random()*Math.PI*2;return new e(Math.cos(t),Math.sin(t))}t.addEventListener("touchstart",(function(t){x(t.touches[0])}),!1),t.addEventListener("touchmove",(function(t){x(t.touches[0])}),!1),t.addEventListener("touchend",(function(t){x(t.touches[0])}),!1),t.addEventListener("mousemove",(function(t){x(t)}),!1),function(){for(let t=0;t<20;++t){let e={};e.v=v(t),e.dir=p(),e.size=1,e.j=[],e.body=[],e.g=5,e.C=0,e.m=0,e.$=.4*Math.random()+1.1,e.p=Math.random()<.5?-1:1,e.F=0,e.D=0,e.k=0,i.push(e)}for(let t=0;t<s;++t)for(let n=0;n<s;++n){let i={};i.v=new e(t,n),i.size=.05*Math.random()+.4,i.color="hsl("+360*Math.random()+", 100%, 50%)",c.push(i)}}(),window.requestAnimationFrame((function x(){window.requestAnimationFrame(x),function(){let x=Date.now(),p=x-d;d=x,p/=1e3,p=Math.min(p,.034),t.width=$(window).width(),t.height=$(window).height(),o=t.width,r=t.height,l=Math.min(o,r),h=25,u=l/h,f=new e(.5*o,.5*r);let C=n.i(f).l(u);for(let t=0;t<i.length;++t){let e=i[t];e.m>0||m(e.v,t,1)&&M(e)}for(let t=0;t<i.length;++t){let e=i[t];e.m>0&&(e.m-=p,e.m<=0&&(e.v=v(t)))}C.u()>.01&&(i[0].dir=C.h());for(let t=1;t<i.length;++t){let e=i[t];(e.k-=p)<0&&(e.k=.5*Math.random()+.5,e.p=-e.p,e.D=Math.random()>.3?10*Math.random():0),e.F+=(e.D*e.p-e.F)*p*2,e.dir=e.dir.M(e.F*p)}for(let t=1;t<i.length;++t){let e=i[t];if(!(e.m>0)&&y(e.v.t(e.dir.o(1)),t,e.$)){for(let n=1;n<100;++n){if(!y(e.v.t(e.dir.M(-.02*n).o(1)),t,e.$)){e.dir=e.dir.M(-.02*n),e.p=-e.p;break}if(!y(e.v.t(e.dir.M(.02*n).o(1)),t,e.$)){e.dir=e.dir.M(.02*n),e.p=-e.p;break}}}}for(let t=0;t<i.length;++t){let e=i[t];if(!(e.m>0)){e.v=e.v.t(e.dir.o(5*p));var k=e.v.x,F=e.v.y;(k<0||k>s||F<0||F>s)&&M(e)}}for(let t=0;t<i.length;++t){let e=i[t];if(e.m>0)continue;let n=10+e.g/10;e.C<n&&(e.C=Math.min(e.C+4*p,n)),e.C>n&&(e.C=Math.max(e.C-8*p,n)),e.j.push(e.v),e.body=[];let o=0,r=e.v,l=.5,h=e.C;for(o=e.j.length-2;o>=0;--o){let t=e.j[o].i(r),n=Math.min(Math.min(l,t.u()),h);if(h-=n,r=r.t(t.h().o(n)),l-=n,h<1e-4){e.body.push(r);break}l<=0&&(++o,l=.5,e.body.push(r))}for(;--o>0;)e.j.shift();h>1e-4&&e.body.push(r)}a=i[0].v;let E=t.getContext("2d");E.fillStyle="#555",E.fillRect(0,0,o,r),E.fillStyle="#444";for(let t=-1;t<=s+1;++t)w(E,t,s/2,.05,s/2+1);for(let t=-1;t<=s+1;++t)w(E,s/2,t,s/2+1,.05);for(let t=0;t<c.length;++t){let e=c[t],n=e.v.i(a).o(u);b(E,f.x+n.x,f.y+n.y,e.size*u/2,e.color)}for(let t=0;t<i.length;++t){let e=i[t];if(e.m>0)continue;for(let t=e.body.length-1;t>=0;--t){let n=e.body[t].i(a).o(u);g(E,f.x+n.x,f.y+n.y,e.size*u/2,"#0F0")}let n=e.v.i(a).o(u);g(E,f.x+n.x,f.y+n.y,e.size*u/2,"#F66")}E.fillStyle="#999",w(E,s/2-1e3,0,1e3-s/2-.5,1e3),w(E,1e3+s/2,0,1e3-s/2-.5,1e3),w(E,0,s/2-1e3,1e3,1e3-s/2-.5),w(E,0,1e3+s/2,1e3,1e3-s/2-.5),function(t,e,n,i,o){t.strokeStyle="#f77",t.lineWidth=.2*u,t.strokeRect(f.x+(e-a.x-i)*u,f.y+(n-a.y-o)*u,i*u*2,o*u*2)}(E,s/2,s/2,s/2+.5,s/2+.5)}()}));const C={passive:!1};function k(t){t.preventDefault()}document.body.addEventListener("touchcancel",k,C),document.body.addEventListener("touchend",k,C)}t();